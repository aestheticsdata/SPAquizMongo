(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var login=require("./classes/Login.js");var afterLogin=require("./classes/AfterLogin.js");$(function(){localStorage.userName="guest";localStorage.password="15032014";login.init(afterLogin)})},{"./classes/AfterLogin.js":2,"./classes/Login.js":4}],2:[function(require,module,exports){"use strict";var createQuestion=require("./EditCreateQuestion.js");var deleteQuestions=require("./deleteQuestions.js");var config=require("../config.js");module.exports={urls:config.online,loginComplete:function(){$("#login").empty();$("#menuView").show();createQuestion.setUrls(this.urls);createQuestion.init();deleteQuestions.setUrls(this.urls);deleteQuestions.init();$("#editMode").hide();$("#createBtn").trigger("click")}}},{"../config.js":12,"./EditCreateQuestion.js":3,"./deleteQuestions.js":6}],3:[function(require,module,exports){"use strict";var appState=require("./appState.js");var VS=require("./services/ViewService.js");var KeepScope=require("./helpers/KeepScope.js");var editCreateQuestion={keepScope:new KeepScope,entry:false,vs:new VS,urls:{},minInputTextNumber:2,setUrls:function(urls){this.urls=urls},init:function(entry){var self=this;if(entry){this.entry=entry;this.setup(entry)}else{$("#createBtn").on("click",this.keepScope.save(this.setup,this))}},setup:function(e){var self=this;function onViewLoaded(){console.log("onViewLoaded");$("#view").empty().append(self.vs.getVO());var $addButton=$("#addButton"),$removeButton=$("#removeButton"),$choiceContainer=$("#choiceContainer"),$choice=$(".choice"),choiceLength=$choice.length,$logMessage=$("#logMessage");if(!self.entry){$choiceContainer.append(""+'<div class="singleChoiceContainer">'+'<label class="control-label">choice 1: </label>'+'<input type="text" name="choices" class="input-xxlarge choice"></input>'+'<input type="radio" name="correctAnswer" class="radio" value="0" checked="true"></input>'+"</div>"+'<div class="singleChoiceContainer">'+'<label class="control-label">choice 2: </label>'+'<input type="text" name="choices" class="input-xxlarge choice"></input>'+'<input type="radio" name="correctAnswer" class="radio" value="1"></input>'+"</div>")}else{$("#questionForm").prepend('<input type="hidden" id="hidden" name="_id"></script>');$("#question").val(self.entry.question);$("#hidden").val(self.entry._id);for(var i in self.entry.choices){$choiceContainer.append('<div class="singleChoiceContainer">'+'<label class="control-label">choice '+(parseInt(i,10)+1)+": </label>"+'<input type="text" name="choices" class="input-xxlarge choice" value="'+self.entry.choices[i]+'"></input>'+'<input type="radio" name="correctAnswer" class="radio" value="'+i+'" ></input>'+"</div>");if(self.entry.correctAnswer==parseInt(i,10)){$choiceContainer.find("input[type=radio]").prop("checked",true)}}}$addButton.on("click",function(e){choiceLength=$(".choice").length;var choiceInputField='<div class="singleChoiceContainer">'+"<label>choice "+(choiceLength+1)+": </label>"+'<input type="text" name="choices" class="input-xxlarge choice" ></input>'+'<input type="radio" class="radio" value="'+choiceLength+'" name="correctAnswer"></input>'+"</div>";e.preventDefault();$choiceContainer.append(choiceInputField)});$removeButton.on("click",function(e){var $singleChoiceContainer=$(".singleChoiceContainer");e.preventDefault();if($singleChoiceContainer.length>self.minInputTextNumber){$singleChoiceContainer.last().remove()}});$("#questionForm").submit(function(e){var serializedForm=$(this).serialize();var url=self.entry?self.urls.editRESTURL:self.urls.createRESTURL;e.preventDefault();$.post(url,serializedForm).done(function(){$logMessage.text("question processed").delay(800).fadeOut(200);if(appState.isCreate){$("#questionForm")[0].reset()}else{$("#deleteBtn").trigger("click")}}).fail(function(){$logMessage.css("color","#f00").css("background-color","#000").text("could not connect to restify")})})}if(!appState.isCreate||appState.isEdit){$("#deleteBtn").removeClass("selectedBtn");appState.isCreate=e?false:true;appState.isEdit=e?true:false;appState.isDelete=false;if(appState.isCreate){$("#createBtn").addClass("selectedBtn");self.entry=false}if(e){$("#editMode").show()}else{$("#editMode").hide()}if(self.vs.getVO()===undefined){self.vs.loaded.addOnce(onViewLoaded);self.vs.getView("./views/create.html")}else{onViewLoaded()}}}};module.exports=editCreateQuestion},{"./appState.js":5,"./helpers/KeepScope.js":7,"./services/ViewService.js":9}],4:[function(require,module,exports){"use strict";module.exports={$login:$("#login"),init:function(afterLogin){var self=this;$("#signin_button").on("click",function(e){e.preventDefault();self.signinHandler(afterLogin)});$("#login").on("keypress",function(e){if(e.which===13){e.preventDefault();self.signinHandler(afterLogin)}})},signinHandler:function(afterLogin){var userName=$("#userName").val();var password=$("#password").val();if(localStorage.userName===userName&&localStorage.password===password){this.$login.hide();afterLogin.loginComplete()}else{$("#wrongLogin").text("wrong name/password")}}}},{}],5:[function(require,module,exports){"use strict";var appState={isCreate:false,isEdit:false,isDelete:false,setState:function(o){this.isCreate=o.isCreate;this.isEdit=o.isEdit;this.isDelete=o.isDelete}};module.exports=appState},{}],6:[function(require,module,exports){"use strict";var appState=require("./appState.js");var editQuestion=require("./EditCreateQuestion.js");var VS=require("./services/ViewService.js");var QS=require("./services/QuestionsJSONService.js");var JsonVo=require("./services/vo/JsonVO.js");var KeepScope=require("./helpers/KeepScope.js");var deleteQuestions={keepScope:new KeepScope,urls:{},setUrls:function(urls){this.urls=urls},init:function(){var self=this;$("#deleteBtn").on("click",function(event){self.keepScope.save(self.setup,self,event)()})},vs:{},setup:function(event){var self=this,$deleteBtn=$(event.currentTarget);this.vs=new VS;function loadQuestionsJSON(){QS.loaded.addOnce(onViewLoaded);QS.getJSON(self.urls.jsonUrl)}function onViewLoaded(){var $questionsContainer={};$("#view").empty().append(self.vs.getVO());$questionsContainer=$("#questionsContainer");$.each(JsonVo.content,function(key,entry){var question='<li><input type="checkbox" id="'+entry._id+'" name="'+entry._id+'"><label class="checkbox inline" for="'+key+'">'+entry.question+"</label></li>";$questionsContainer.append(question);$("#"+entry._id).next().on("mouseenter",function(e){$(this).removeClass("rollOut").addClass("rollOver")}).on("mouseleave",function(e){$(this).removeClass("rollOver").addClass("rollOut")}).on("click",function(e){editQuestion.init(entry)})});$("#deleteForm").submit(function(e){e.preventDefault();var serializedForm=$(this).serialize();if($("input[type=checkbox]:checked").length!==0){$.post(self.urls.deleteRESTUrl,serializedForm).done(function(){appState.isDelete=false;self.vs=null;$deleteBtn.trigger("click")}).fail(function(){$("#errMessage").css("color","#f00").text("delete error")})}})}if(!appState.isDelete){$("#createBtn").removeClass("selectedBtn");$deleteBtn.addClass("selectedBtn");appState.isCreate=false;appState.isEdit=false;appState.isDelete=true;$("#editMode").hide();if(self.vs.getVO()===undefined){self.vs.loaded.addOnce(loadQuestionsJSON);self.vs.getView("./views/delete.html")}else{onViewLoaded()}}}};module.exports=deleteQuestions},{"./EditCreateQuestion.js":3,"./appState.js":5,"./helpers/KeepScope.js":7,"./services/QuestionsJSONService.js":8,"./services/ViewService.js":9,"./services/vo/JsonVO.js":10}],7:[function(require,module,exports){"use strict";var KeepScope=function(){this.save=function(listener,context,event){return function(){listener.call(context,event)}}};module.exports=KeepScope},{}],8:[function(require,module,exports){"use strict";var signals=require("signals");var jsonVO=require("./vo/JsonVO.js");var VS={loaded:new signals.Signal,getJSON:function(url){var self=this;$.get(url,function(json){jsonVO.content=json;self.loaded.dispatch()})}};module.exports=VS},{"./vo/JsonVO.js":10,signals:13}],9:[function(require,module,exports){"use strict";var signals=require("signals");var GenericVO=require("./vo/vo.js");var VS=function(){this.vo=new GenericVO;this.setVO=function(vo){this.vo.content=vo;this.loaded.dispatch()};this.getVO=function(){return this.vo.content};this.loaded=new signals.Signal;this.getView=function(view){var self=this;$.get(view,function(data){self.setVO(data)})}};module.exports=VS},{"./vo/vo.js":11,signals:13}],10:[function(require,module,exports){"use strict";module.exports={content:""}},{}],11:[function(require,module,exports){"use strict";module.exports=function(content){this.content=content}},{}],12:[function(require,module,exports){"use strict";exports.local={createRESTURL:"http://127.0.0.1:8765/questions",editRESTURL:"http://127.0.0.1:8765/questionsUpdate",deleteRESTUrl:"http://127.0.0.1:8765/questionsDelete",jsonUrl:"http://127.0.0.1:8765/questions"};exports.online={createRESTURL:"http://www.hexafarm.com:8765/questions",editRESTURL:"http://www.hexafarm.com:8765/questionsUpdate",deleteRESTUrl:"http://www.hexafarm.com:8765/questionsDelete",jsonUrl:"http://www.hexafarm.com:8765/questions"}},{}],13:[function(require,module,exports){(function(global){function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener;this._isOnce=isOnce;this.context=listenerContext;this._signal=signal;this._priority=priority||0}SignalBinding.prototype={active:true,params:null,execute:function(paramsArr){var handlerReturn,params;if(this.active&&!!this._listener){params=this.params?this.params.concat(paramsArr):paramsArr;handlerReturn=this._listener.apply(this.context,params);if(this._isOnce){this.detach()}}return handlerReturn},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};function validateListener(listener,fnName){if(typeof listener!=="function"){throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",fnName))}}function Signal(){this._bindings=[];this._prevParams=null;var self=this;this.dispatch=function(){Signal.prototype.dispatch.apply(self,arguments)}}Signal.prototype={VERSION:"1.0.0",memorize:false,_shouldPropagate:true,active:true,_registerListener:function(listener,isOnce,listenerContext,priority){var prevIndex=this._indexOfListener(listener,listenerContext),binding;if(prevIndex!==-1){binding=this._bindings[prevIndex];if(binding.isOnce()!==isOnce){throw new Error("You cannot add"+(isOnce?"":"Once")+"() then add"+(!isOnce?"":"Once")+"() the same listener without removing the relationship first.")}}else{binding=new SignalBinding(this,listener,isOnce,listenerContext,priority);this._addBinding(binding)}if(this.memorize&&this._prevParams){binding.execute(this._prevParams)}return binding},_addBinding:function(binding){var n=this._bindings.length;do{--n}while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding)},_indexOfListener:function(listener,context){var n=this._bindings.length,cur;while(n--){cur=this._bindings[n];if(cur._listener===listener&&cur.context===context){return n}}return-1},has:function(listener,context){return this._indexOfListener(listener,context)!==-1},add:function(listener,listenerContext,priority){validateListener(listener,"add");return this._registerListener(listener,false,listenerContext,priority)},addOnce:function(listener,listenerContext,priority){validateListener(listener,"addOnce");return this._registerListener(listener,true,listenerContext,priority)},remove:function(listener,context){validateListener(listener,"remove");var i=this._indexOfListener(listener,context);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1)}return listener},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy()}this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=false},dispatch:function(params){if(!this.active){return}var paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length,bindings;if(this.memorize){this._prevParams=paramsArr}if(!n){return}bindings=this._bindings.slice();this._shouldPropagate=true;do{n--}while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==false)},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var signals=Signal;signals.Signal=Signal;if(typeof define==="function"&&define.amd){define(function(){return signals})}else if(typeof module!=="undefined"&&module.exports){module.exports=signals}else{global["signals"]=signals}})(this)},{}]},{},[1]);